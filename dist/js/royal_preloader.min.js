var docCookies={getItem:function(e){return e&&this.hasItem(e)?unescape(document.cookie.replace(RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setItem:function(e,o,a,t,r,s){if(e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)){var i="";if(a)switch(a.constructor){case Number:i=1/0===a?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+a;break;case String:i="; expires="+a;break;case Date:i="; expires="+a.toGMTString()}document.cookie=escape(e)+"="+escape(o)+i+(r?"; domain="+r:"")+(t?"; path="+t:"")+(s?"; secure":"")}},removeItem:function(e,o){e&&this.hasItem(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; path="+o:""))},hasItem:function(e){return RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},JQ=jQuery;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.transitionEnd=function(e,o){var a=!1,t=document.createElement("div");if(JQ(["transition","WebkitTransition","MozTransition","msTransition"]).each(function(e,o){if(void 0!==t.style[o])return a=!0,!1}),a){var r="webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend";e.bind(r,function(a){e.unbind(r),o(a,e)})}else setTimeout(function(){o(null,e)},0);return e};var Royal_Preloader={_overlay:null,_loader:null,_name:null,_percentage:null,_on_complete:null,_text_loader:null,_text_loader_overlay:null,_logo_loader:null,_logo_loader_meter:null,_total:0,_loaded:0,_image_queue:[],_percentage_loaded:0,_mode:"number",_text:"loading...",_text_colour:"#FFFFFF",_images:[],_show_progress:!0,_show_percentage:!0,_background:"#000000",_logo:"",_logo_size:[80,80],_cookie:!1,_timeout:10,_init:function(){if(JQ("img").each(function(e){JQ(this).attr("src")&&Royal_Preloader._images.push(JQ(this).attr("src"))}),Royal_Preloader._cookie){var e="melonhtml5_royal_preloader_"+Royal_Preloader._cookie;if(docCookies.getItem(e))return JQ("#royal_preloader").remove(),void JQ(document.body).removeClass("royal_preloader");docCookies.setItem("melonhtml5_royal_preloader_"+Royal_Preloader._cookie,(new Date).getTime(),1/0)}Royal_Preloader._total=Royal_Preloader._images.length,Royal_Preloader._build(),Royal_Preloader._load()},_build:function(){switch(this._overlay=JQ("#royal_preloader"),this._overlay.length||(this._overlay=JQ("<div>").attr("id","royal_preloader").prependTo(JQ(document.body))),this._overlay.addClass("royal_preloader_"+this._mode),"line"!==this._mode&&this._overlay.css("background-color",this._background),this._mode){case"number":var e=this._hexToRgb(this._text_colour);this._percentage=JQ("<div>").html("<div></div><span></span>").css({color:this._text_colour,"border-color":e?"rgba("+e.r+", "+e.g+", "+e.b+", 0.7)":this._text_colour}).addClass("royal_preloader_percentage").appendTo(this._overlay),this._percentage.children("div").css("border-left-color",this._text_colour);break;case"text":this._text_loader=JQ("<div>").addClass("royal_preloader_loader").text(this._text).css("color",this._text_colour).appendTo(this._overlay),this._text_loader_overlay=JQ("<div>").css("background-color",this._background).appendTo(this._text_loader);break;case"scale_text":for(var o="",a=0;a<this._text.length;a++)o+="<span>"+this._htmlentities(this._text.charAt(a))+"</span>";this._text_loader=JQ("<div>").addClass("royal_preloader_loader").html(o).css("color",this._text_colour).appendTo(this._overlay);break;case"logo":this._logo_loader=JQ("<div>").css({width:this._logo_size[0],height:this._logo_size[1],"margin-left":this._logo_size[0]/2*-1,"margin-top":this._logo_size[1]/2*-1,"background-image":'url("'+this._logo+'")'}).addClass("royal_preloader_loader").appendTo(this._overlay),this._logo_loader_meter=JQ("<div>").css("background-color",this._background).appendTo(this._logo_loader),this._show_progress&&(this._percentage=JQ("<div>").css({color:this._text_colour,width:this._logo_size[0],height:this._logo_size[1],"margin-left":this._logo_size[0]/2*-1,"margin-top":this._logo_size[1]/2,"background-color":this._background}).addClass("royal_preloader_percentage").appendTo(this._overlay));break;case"line":this._line_loader=JQ("<div>").addClass("royal_preloader_loader").css("background-color",this._background).appendTo(this._overlay),JQ("<div>").addClass("royal_preloader_peg").css("box-shadow","0 0 10px "+this._background).appendTo(this._line_loader),JQ(document.body).css("visibility","visible");break;case"progress":this._progress_loader=JQ("<div>").addClass("royal_preloader_loader").appendTo(this._overlay),this._show_progress&&(this._percentage=JQ("<div>").addClass("royal_preloader_percentage").text(0).appendTo(this._overlay))}this._overlay.appendTo(JQ(document.body)),"text"!==this._mode&&"scale_text"!==this._mode||this._text_loader.css("margin-left",this._text_loader.width()/2*-1)},_load:function(){if(("number"===this._mode||"logo"===this._mode||"progress"===this._mode)&&this._show_progress){this._percentage.data("num",0);var e="0"+(Royal_Preloader._show_percentage?"%":"");"number"===this._mode?this._percentage.children("span").text(e):this._percentage.text(e)}JQ.each(this._images,function(e,o){var a=function(){Royal_Preloader._imageOnLoad(o)},t=new Image;t.src=o,t.complete?a():(t.onload=a,t.onerror=a)});var o=this._images.length?1e3*this._timeout:0;setTimeout(function(){Royal_Preloader._overlay&&Royal_Preloader._animatePercentage(Royal_Preloader._percentage_loaded,100)},o)},_hexToRgb:function(e){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null},_htmlentities:function(e){return e.toString().replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;")},_animatePercentage:function(e,o){Royal_Preloader._percentage_loaded=e,e<o&&(e++,setTimeout(function(){switch(Royal_Preloader._mode){case"text":Royal_Preloader._text_loader_overlay.css("left",e+"%");break;case"scale_text":var a=parseInt(Royal_Preloader._text.length*e*.01,10);Royal_Preloader._text_loader.children("span").eq(a).addClass("loaded");break;case"line":Royal_Preloader._line_loader.width(e+"%");break;case"number":if(Royal_Preloader._show_progress){var t=e+(Royal_Preloader._show_percentage?"%":"");Royal_Preloader._percentage.children("span").text(t)}break;case"logo":if(Royal_Preloader._show_progress){t=e+(Royal_Preloader._show_percentage?"%":"");Royal_Preloader._percentage.text(t)}Royal_Preloader._logo_loader_meter.css("bottom",e+"%");break;case"progress":if(Royal_Preloader._show_progress){t=e+(Royal_Preloader._show_percentage?"%":"");Royal_Preloader._percentage.text(t)}}Royal_Preloader._animatePercentage(e,o)},5),100===e&&Royal_Preloader._loadFinish())},_imageOnLoad:function(e){this._image_queue.push(e),this._image_queue.length&&this._image_queue[0]===e&&this._processQueue()},_reQueue:function(){Royal_Preloader._image_queue.splice(0,1),Royal_Preloader._processQueue()},_processQueue:function(){0!==this._image_queue.length&&(this._loaded++,Royal_Preloader._animatePercentage(Royal_Preloader._percentage_loaded,parseInt(this._loaded/this._total*100,10)),this._reQueue())},_loadFinish:function(){transitionEnd(this._overlay,function(e,o){Royal_Preloader._overlay&&(Royal_Preloader._overlay.remove(),Royal_Preloader._overlay=null)}),TweenMax.to(this._overlay,1.5,{autoAlpha:0,ease:Power4.easeInOut,onComplete:function(){$("#royal_preloader").remove()}}),setTimeout(function(){$("p,h1,h2,h3,.button,ul").removeClass("glitch")},1e3),JQ(document.body).removeClass("royal_preloader"),this._on_complete&&this._on_complete()},config:function(e){void 0!==e.mode&&(this._mode=e.mode),void 0!==e.text&&(this._text=e.text),void 0!==e.text_colour&&(this._text_colour=e.text_colour),void 0!==e.timeout&&(this._timeout=parseInt(e.timeout,10)),void 0!==e.showProgress&&(this._show_progress=!!e.showProgress),void 0!==e.showPercentage&&(this._show_percentage=!!e.showPercentage),void 0!==e.background&&(this._background=e.background),void 0!==e.logo&&(this._logo=e.logo),void 0!==e.logo_size&&(this._logo_size=e.logo_size),void 0!==e.onComplete&&(this._on_complete=e.onComplete),void 0!==e.images&&(this._images=e.images),void 0!==e.cookie&&(this._cookie=e.cookie)}};setTimeout(function(){JQ(document).ready(Royal_Preloader._init)});
